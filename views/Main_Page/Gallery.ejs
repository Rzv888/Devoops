
<link href="./css/Gallery.css" rel="stylesheet">

<div class="container-fluid">
  <div class="Tvent-gallery">
    <div class="gallery-item" onclick="openPopup(this)">
      <img src="https://images.pexels.com/photos/3546429/pexels-photo-3546429.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="Image 1">
      <div class="overlay">
        <p>PKKMB 2019</p>
      </div>
    </div>

    <div class="gallery-item">
      <img src="https://images.pexels.com/photos/3889868/pexels-photo-3889868.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" alt="Image 2">
      <div class="overlay">
        <p>PKKMB 2020</p>
      </div>
    </div>

    <div class="gallery-item">
      <img src="https://images.pexels.com/photos/2326290/pexels-photo-2326290.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" />
      <div class="overlay">
        <p>PKKMB 2021</p>
      </div>
    </div>
  
        <div class="gallery-item">
          <img src="https://images.pexels.com/photos/2360569/pexels-photo-2360569.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500" />
          <div class="overlay">
            <p>Festival budaya 2022</p>
          </div>
        </div>
  
        <div class="gallery-item">
          <img src="https://images.pexels.com/photos/259987/pexels-photo-259987.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500">
          <div class="overlay">
            <p>Seminat Kecerdasan Buatan 2022</p>
          </div>
        </div>
        <center></center>
        <div class="pagination" id="pagination"></div>
  </div>
  <br>
</div>

<div id="imagePopup" class="popup" onclick="closePopup()">
  <span class="popup-close">&times;</span>
  <img class="popup-content" id="popupImage">
  <div id="popupCaption"></div>
</div>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script>

function openPopup(element) {
  const popup = document.getElementById("imagePopup");
  const popupImage = document.getElementById("popupImage");
  const popupCaption = document.getElementById("popupCaption");

  // Mengambil URL gambar dan caption
  popupImage.src = element.querySelector("img").src;
  popupCaption.innerHTML = element.querySelector(".overlay p").innerText;

  // Tampilkan popup
  popup.style.display = "block";
}

function closePopup() {
  const popup = document.getElementById("imagePopup");
  popup.style.display = "none";
}

function showPage(page) {
  const itemsPerPage = 18;
  $(".gallery-item").hide();
  const startIndex = (page - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  $(".gallery-item").slice(startIndex, endIndex).show();
}

function generatePaginationButtons(currentPage) {
  const totalPages = Math.ceil($(".gallery-item").length / itemsPerPage);
  $("#pagination").empty();

  let startPage, endPage;
  if (totalPages <= 10) {
    startPage = 1;
    endPage = totalPages;
  } else {
    if (currentPage <= 6) {
      startPage = 1;
      endPage = 10;
    } else if (currentPage + 4 >= totalPages) {
      startPage = totalPages - 9;
      endPage = totalPages;
    } else {
      startPage = currentPage - 5;
      endPage = currentPage + 4;
    }
  }

  if (currentPage > 1) {
    $("#pagination").append(`<button onclick="showPage(${currentPage - 1})">«</button>`);
  }

  for (let i = startPage; i <= endPage; i++) {
    $("#pagination").append(`<button onclick="showPage(${i})"${i === currentPage ? ' class="active"' : ''}>${i}</button>`);
  }

  if (currentPage < totalPages) {
    $("#pagination").append(`<button onclick="showPage(${currentPage + 1})">»</button>`);
  }
}

module.exports = { openPopup, closePopup, showPage, generatePaginationButtons };
  </script>